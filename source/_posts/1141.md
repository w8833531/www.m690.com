---
title: 实战 -- 使用VS Code + Docker for windows 实现一个nginx+uwsgi的快速开发环境
author: 吴鹰
tags:
  - VSCode
  - Docker for windows
  - django-uwsgi-nginx
id: 1141
categories: VSCode
date: 2018-03-09 13:03:00
---
>最近一直在用VScode做Django项目开发,一个快速好用的开发环境是必须品。VSCode 的确是一个好东西，内部不仅集成了git，还集成了Docker,这让我们可以在本机(windown 10)上直接启动一个Docker 镜像做为开发环境。而且这个Docker镜像本来也就是一个Dockerfile加一些配置文件生成的。这让我们生成了一个概念，线上运行的程序是代码，而运行程序的Docker环境也是代码，甚至运行docker环境的公有云资源也可以用代码申请生成，统统进入代码库管理。凡人皆有一死，一切皆是代码 ：）。


#### 下载安装 Docker for windows
以前在windows上用docker 先要安装一个Oracle VirtualBox,然后再在VMk中启Docker.现在不用了，如果你用的是windown10 Pro,那么直接安装就可以，一个安装程序搞定。
1. [docker for windows 下载](https://docs.docker.com/docker-for-windows/install/#download-docker-for-windows)地址
我选择了Stable channel 版本
2. [安装前须知](https://docs.docker.com/docker-for-windows/install/#what-to-know-before-you-install)
    1、之前的Oracle VirtualBox 将不可用
    2、要在BIOS中开户中虚拟化支持
    3、这个Docker 只支持在64bit Windows 10 Pro, Enterprise and Education 系统上运行
    4、所有用户可以使用docker
    5、在虚拟机上跑的win10 Pro也可以运行docker ,但不保证。
3. [安装Docker for windows](https://docs.docker.com/docker-for-windows/install/#install-docker-for-windows)
    按平时安装其它windows程序一样，按图一路安装下去就可以了，会要重启生效。在安装完成后，重启后，就会在右侧任务栏出现一个鲸鱼图标。
4. [配置Docker for windows setting](https://docs.docker.com/docker-for-windows/#docker-settings)
    主要就两个：
    1、配置共享盘，我共享的是C:盘，下面还给了个挂载共享盘的一个目录到docker容器的一个例子，如下图：
    ![](/images/2018-03-09-17-20-19.png)
    2、配置用多少个CPU和多大内存，如下图：
![](/images/2018-03-09-17-22-37.png)
#### 运行Docker，并用命令行生成相关的Docker images运行Containers
1. 下载[ django-uwsgi-nginx](https://github.com/dockerfiles/django-uwsgi-nginx) 
```
git clone https://github.com/dockerfiles/django-uwsgi-nginx
```
2. 用docker build 一个images
```
# 你可以安自己的需要，修改 django-uwsgi-nginx中的Dockerfile及nginx-app.conf uwsgi.ini等文件
cd django-uwsgi-nginx
# 我用docker build了一个webapp的image
docker build -t webapp .
```
3. 运行一个以webapp为image的Container
```
# -v 把c:\git\MxOnline 挂到 /apps 这要就可以一边更改本机上的代码，一边看运行结果了
docker run -d --name django -v c:\git\MxOnline:/apps -p 80:80 webapp
```

4. 配置完成后，打开VSCode,主可以在左则的Docker选项卡中，images和Containers可用了,如下图 
![](/images/2018-03-09-17-39-04.png)