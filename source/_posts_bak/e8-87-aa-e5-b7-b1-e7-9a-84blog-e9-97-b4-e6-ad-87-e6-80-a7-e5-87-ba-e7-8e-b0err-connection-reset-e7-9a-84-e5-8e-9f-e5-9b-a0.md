---
title: 自己的blog 间歇性出现ERR_CONNECTION_RESET的原因
tags:
  - ERR_CONNECTION_RESET
  - GW
  - 原因
  - 墙
id: 925
categories:
  - 技术
date: 2015-06-24 16:44:37
---

> 最近1个多月，一直发现自己的blog http://www.m690.com 首页可以打开，但进入个别帖子，浏览器直接报 “ERR_CONNECTION_RESET”。之前还以为我在日本的lindo VPS上的nginx或php有问题。但一直找不到具体原因。因为这个问题是间歇性的，时好时坏。

    今天终于把这个问题搞定了。出现上面问题的原因是因为我的上一篇博客是关于ｏｐｅｎ ｖｐｎ的，其中还给了一个ｙｏｕ ｔｕｂｅ（注意，我为了不影响国内用户对我的博客的访问，我把ｙｏｕ ｔｕｂｅ用全角打出来了）网站视频的连接。而我们伟大的GW是基与内容过滤的，我的网站没有使用ｈｔｔｐｓ，所以当我放在国外的vps服务器上的blog内容中出现ｙｏｕ ｔｕｂｅ相关链接时，我的blog就被GW间歇性的CONNECTION_RESET了。
    我是这样发现上面的原因的：
    1、首面可以正常打开，但打开个别贴子，浏览器直接报“ERR_CONNECTION_RESET”报错，然后首页面也打不开了。
    2、当我的浏览器出现出现“ERR_CONNECTION_RESET”报错时，我的blog上的http访问日志不会有任何显示。用tcpdump也无法看到任何http数据传输。
    3、当我使用APN 这个https代理工具穿墙后，我发现我的blog所有内容的访问都正常了，不会有CONNECTION_RESET。
    4、当我把贴子中的ｏｐｅｎ ｖｐｎ和　ｙｏｕ ｔｕｂｅ链接都改成全角内容后，在不使用APN https代理的情况下，我的blog 139.224.113.226访问的所有内容也都正常了。
    综上所术：我们伟大的GW是一个基与内容的FW,它会实时的查看你访问国外网站时所获取的内容，如果你获取的内容包括禁止访问的网站，哪你的访问就会被CONNECTION_RESET。我的blog就是这样被间歇性的墙掉的。解决的方法，就是尽量不要在自己的blog中包含国外禁止访问的内容。如果实在要放，就请把相关的链接的内容改成全角，让用户自己手动输入。还有一个办法，就是把自己的站点改成https的。但这样增加额外的成本，要花钱申请一张https的证书，现在godaddy的ssl证书大概100多一年吧，也不是很贵。